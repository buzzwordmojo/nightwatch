(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{4673:(e,s,t)=>{Promise.resolve().then(t.bind(t,6304))},6046:(e,s,t)=>{"use strict";var r=t(6658);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},6304:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(5155),n=t(2115),c=t(6046),a=t(9749),i=t(3312),o=t(9173),l=t(9285),d=t(6235),h=t(1598),p=t(2783);function u(){let e=(0,c.useSearchParams)().get("id")||"Nightwatch",s=(0,l.US)({portalUrl:"http://192.168.4.1",deviceId:e,autoStart:!0});return(0,r.jsxs)("div",{className:"space-y-6",children:["complete"!==s.step&&"error"!==s.step&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o.k,{value:(()=>{switch(s.step){case"connect-hotspot":default:return 0;case"trust-cert":return 25;case"select-network":case"entering-password":return 50;case"connecting":case"searching":return 75;case"complete":return 100}})(),className:"h-2"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["connect-hotspot"===s.step&&"Step 1: Connect to device","trust-cert"===s.step&&"Step 2: Trust certificate",("select-network"===s.step||"entering-password"===s.step)&&"Step 3: Select your WiFi",("connecting"===s.step||"searching"===s.step)&&"Step 4: Connecting..."]})]}),"connect-hotspot"===s.step&&(0,r.jsx)(l.nZ,{ssid:e,isConnected:s.hotspotConnected,isChecking:!0,attemptCount:s.hotspotAttempts}),"trust-cert"===s.step&&(0,r.jsx)(l.zb,{certUrl:"https://192.168.4.1",onContinue:s.proceedAfterCertTrust}),"select-network"===s.step&&(0,r.jsxs)(a.Zp,{children:[(0,r.jsx)(a.aR,{className:"pb-4",children:(0,r.jsxs)(a.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,r.jsx)("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary text-sm font-bold",children:"3"}),"Select Your WiFi"]})}),(0,r.jsxs)(a.Wu,{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose your home WiFi network to connect Nightwatch to the internet."}),(0,r.jsx)(l.bd,{networks:s.networks,selectedSsid:s.selectedSsid,onSelect:s.setSelectedSsid,loading:0===s.networks.length&&!s.error,error:s.error,onRetry:s.scanWifi}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:s.scanWifi,className:"gap-2",children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),"Refresh"]})})]})]}),"entering-password"===s.step&&(0,r.jsxs)(a.Zp,{children:[(0,r.jsx)(a.aR,{className:"pb-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(a.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,r.jsx)("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary text-sm font-bold",children:"3"}),"Enter Password"]}),(0,r.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:s.goBack,children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-1"}),"Back"]})]})}),(0,r.jsxs)(a.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-muted/50 rounded-lg p-3",children:[(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Selected network"}),(0,r.jsx)("p",{className:"font-medium",children:s.selectedSsid})]}),(0,r.jsx)(l.yA,{value:s.password,onChange:s.setPassword,placeholder:"Enter WiFi password",error:s.error}),(0,r.jsx)(i.$,{className:"w-full",size:"lg",onClick:s.connect,disabled:s.password.length<8,children:"Connect"})]})]}),("connecting"===s.step||"searching"===s.step)&&(0,r.jsxs)(a.Zp,{children:[(0,r.jsx)(a.aR,{className:"pb-4",children:(0,r.jsxs)(a.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,r.jsx)("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary text-sm font-bold",children:"4"}),"connecting"===s.step?"Connecting...":"Finding Nightwatch..."]})}),(0,r.jsxs)(a.Wu,{children:[(0,r.jsx)(l.vk,{state:"connecting"===s.step?"connecting":"searching",message:"connecting"===s.step?"Connecting to ".concat(s.selectedSsid,"..."):"Searching for Nightwatch on your network...",progress:s.searchProgress||void 0}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:(0,r.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"connecting"===s.step?"The device will disconnect from the setup hotspot and connect to your WiFi.":"Your phone should automatically reconnect to your home WiFi."})})]})]}),"complete"===s.step&&s.dashboardUrl&&(0,r.jsx)(l.RQ,{dashboardUrl:s.dashboardUrl,ssid:s.selectedSsid||void 0}),"error"===s.step&&(0,r.jsx)(a.Zp,{children:(0,r.jsxs)(a.Wu,{className:"pt-6",children:[(0,r.jsx)(l.vk,{state:"error",message:s.error||"Something went wrong"}),(0,r.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,r.jsxs)(i.$,{variant:"outline",className:"flex-1",onClick:s.goBack,children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Go Back"]}),(0,r.jsx)(i.$,{className:"flex-1",onClick:s.retry,children:"Try Again"})]})]})})]})}function m(){return(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(p.A,{className:"h-8 w-8 animate-spin text-primary"})})}function x(){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(m,{}),children:(0,r.jsx)(u,{})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[181,399,969,441,517,358],()=>s(4673)),_N_E=e.O()}]);