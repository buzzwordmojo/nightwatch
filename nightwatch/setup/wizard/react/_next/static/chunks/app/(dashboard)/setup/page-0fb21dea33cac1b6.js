(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{9854:(e,t,s)=>{Promise.resolve().then(s.bind(s,6514))},6514:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var r=s(5155),n=s(2115);let a=["welcome","name","sensors","notifications","test","complete"],i={monitorName:"",sensorsConfirmed:!1,notifications:{audioAlarm:!0,pushNotifications:!1},testCompleted:!1};var l=s(9173),o=s(3312),d=s(9749);function c(e){let{wizard:t}=e;return(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"text-center",children:[(0,r.jsx)(d.ZB,{children:"Welcome to Nightwatch"}),(0,r.jsx)(d.BT,{children:"Let's set up your monitoring system in just a few steps"})]}),(0,r.jsx)(d.Wu,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid gap-4",children:[(0,r.jsx)(u,{icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),title:"Non-invasive monitoring",description:"No wearables needed - monitors breathing and movement from a distance"}),(0,r.jsx)(u,{icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),title:"Instant alerts",description:"Get notified immediately if something needs your attention"}),(0,r.jsx)(u,{icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),title:"Private & secure",description:"All data stays on your device - no cloud required"})]})}),(0,r.jsx)(d.wL,{children:(0,r.jsx)(o.$,{onClick:t.goNext,className:"w-full",size:"lg",children:"Get Started"})})]})}function u(e){let{icon:t,title:s,description:n}=e;return(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:t}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium",children:s}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:n})]})]})}let m=["Kids Room","Bedroom","Nursery","Guest Room"];function x(e){let{wizard:t}=e,[s,a]=(0,n.useState)(t.data.monitorName),[i,l]=(0,n.useState)(!1),c=s.trim().length>=2,u=i&&!c,x=e=>{a(e),l(!0)};return(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Name your monitor"}),(0,r.jsx)(d.BT,{children:"Give this Nightwatch a name to help identify it"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"monitor-name",className:"text-sm font-medium",children:"Monitor name"}),(0,r.jsx)("input",{id:"monitor-name",type:"text",value:s,onChange:e=>a(e.target.value),onBlur:()=>l(!0),placeholder:"e.g., Kids Room",className:"\n              w-full px-3 py-2 rounded-md border bg-background\n              focus:outline-none focus:ring-2 focus:ring-primary\n              ".concat(u?"border-destructive":"border-input","\n            "),"aria-invalid":u,"aria-describedby":u?"name-error":void 0,autoFocus:!0}),u&&(0,r.jsx)("p",{id:"name-error",className:"text-sm text-destructive",children:"Please enter a name (at least 2 characters)"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Suggestions:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>x(e),className:"\n                  px-3 py-1 text-sm rounded-full border transition-colors\n                  ".concat(s===e?"bg-primary text-primary-foreground border-primary":"bg-secondary hover:bg-secondary/80 border-transparent","\n                "),children:e},e))})]})]}),(0,r.jsxs)(d.wL,{className:"flex gap-2",children:[(0,r.jsx)(o.$,{variant:"outline",onClick:t.goBack,className:"flex-1",children:"Back"}),(0,r.jsx)(o.$,{onClick:()=>{l(!0),c&&(t.updateData({monitorName:s.trim()}),t.goNext())},className:"flex-1",children:"Continue"})]})]})}function h(e){var t,s,a;let{wizard:i}=e,[l,c]=(0,n.useState)(null),[u,m]=(0,n.useState)(!0),[x,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/setup/sensor-preview");if(!e.ok)throw Error("Failed to check sensors");let t=await e.json();c(t),h(null)}catch(e){c({radar:{detected:!0,signal:85},audio:{detected:!0},bcg:{detected:!1}})}finally{m(!1)}};e();let t=setInterval(e,2e3);return()=>clearInterval(t)},[]);let p=(null==l?void 0:l.radar.detected)||(null==l?void 0:l.audio.detected)||(null==l?void 0:l.bcg.detected);return(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Position your sensors"}),(0,r.jsx)(d.BT,{children:"Make sure the sensors can see the bed clearly"})]}),(0,r.jsx)(d.Wu,{className:"space-y-4",children:u?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(f,{name:"Radar Sensor",description:"Detects breathing and movement",detected:null!==(t=null==l?void 0:l.radar.detected)&&void 0!==t&&t,signal:null==l?void 0:l.radar.signal,required:!0}),(0,r.jsx)(f,{name:"Audio Sensor",description:"Listens for breathing sounds",detected:null!==(s=null==l?void 0:l.audio.detected)&&void 0!==s&&s}),(0,r.jsx)(f,{name:"BCG Sensor",description:"Measures heart rate via mattress",detected:null!==(a=null==l?void 0:l.bcg.detected)&&void 0!==a&&a,optional:!0})]}),(0,r.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 space-y-2",children:[(0,r.jsx)("h4",{className:"font-medium text-sm",children:"Positioning tips:"}),(0,r.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,r.jsxs)("li",{className:"flex gap-2",children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:"Mount radar sensor on wall facing the bed"})]}),(0,r.jsxs)("li",{className:"flex gap-2",children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:"Keep 1-2 meters from the bed for best results"})]}),(0,r.jsxs)("li",{className:"flex gap-2",children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:"Avoid obstructions between sensor and bed"})]})]})]}),(null==l?void 0:l.radar.detected)&&(0,r.jsxs)("div",{className:"border rounded-lg p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"relative flex h-3 w-3",children:[(0,r.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Live Preview"})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sensor is detecting movement. Try waving your hand in front of the sensor to verify positioning."})]}),x&&(0,r.jsx)("p",{className:"text-sm text-destructive",children:x})]})}),(0,r.jsxs)(d.wL,{className:"flex gap-2",children:[(0,r.jsx)(o.$,{variant:"outline",onClick:i.goBack,className:"flex-1",children:"Back"}),(0,r.jsx)(o.$,{onClick:()=>{i.updateData({sensorsConfirmed:!0}),i.goNext()},className:"flex-1",disabled:u||!p,children:p?"Looks Good":"No Sensors Detected"})]})]})}function f(e){let{name:t,description:s,detected:n,signal:a,required:i,optional:l}=e;return(0,r.jsxs)("div",{className:"\n        flex items-center gap-3 p-3 rounded-lg border\n        ".concat(n?"border-green-500/30 bg-green-500/5":"border-muted","\n      "),children:[(0,r.jsx)("div",{className:"\n          flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center\n          ".concat(n?"bg-green-500/20 text-green-500":"bg-muted text-muted-foreground","\n        "),children:n?(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium text-sm",children:t}),i&&(0,r.jsx)("span",{className:"text-xs bg-primary/10 text-primary px-1.5 py-0.5 rounded",children:"Required"}),l&&(0,r.jsx)("span",{className:"text-xs bg-muted text-muted-foreground px-1.5 py-0.5 rounded",children:"Optional"})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:s})]}),n&&void 0!==a&&(0,r.jsxs)("div",{className:"flex-shrink-0 text-right",children:[(0,r.jsxs)("div",{className:"text-sm font-medium",children:[a,"%"]}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"Signal"})]})]})}function p(e){let{wizard:t}=e,[s,a]=(0,n.useState)(t.data.notifications.audioAlarm),[i,l]=(0,n.useState)(t.data.notifications.pushNotifications);return(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Notification preferences"}),(0,r.jsx)(d.BT,{children:"Choose how you want to be alerted"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[(0,r.jsx)(g,{title:"Audio alarm",description:"Play a loud alarm on the device when an alert is triggered",checked:s,onChange:a,icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"})}),recommended:!0}),(0,r.jsx)(g,{title:"Push notifications",description:"Send alerts to your phone (requires additional setup)",checked:i,onChange:l,icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),!s&&!i&&(0,r.jsx)("div",{className:"bg-amber-500/10 border border-amber-500/20 text-amber-600 dark:text-amber-400 px-4 py-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:"No notifications enabled"}),(0,r.jsx)("p",{className:"text-sm opacity-80",children:"You won't be alerted if something needs attention. Consider enabling at least one notification method."})]})]})}),i&&(0,r.jsx)("div",{className:"bg-secondary/50 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Push notifications will be configured after setup completes. You'll need a Pushover or Ntfy account."})})]}),(0,r.jsxs)(d.wL,{className:"flex gap-2",children:[(0,r.jsx)(o.$,{variant:"outline",onClick:t.goBack,className:"flex-1",children:"Back"}),(0,r.jsx)(o.$,{onClick:()=>{t.updateData({notifications:{audioAlarm:s,pushNotifications:i}}),t.goNext()},className:"flex-1",children:"Continue"})]})]})}function g(e){let{title:t,description:s,checked:n,onChange:a,icon:i,recommended:l}=e;return(0,r.jsxs)("button",{type:"button",onClick:()=>a(!n),className:"\n        w-full flex items-start gap-3 p-4 rounded-lg border text-left transition-colors\n        ".concat(n?"border-primary bg-primary/5":"border-muted hover:border-muted-foreground/30","\n      "),role:"switch","aria-checked":n,children:[(0,r.jsx)("div",{className:"\n          flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center\n          ".concat(n?"bg-primary/20 text-primary":"bg-muted text-muted-foreground","\n        "),children:i}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"font-medium",children:t}),l&&(0,r.jsx)("span",{className:"text-xs bg-primary/10 text-primary px-1.5 py-0.5 rounded",children:"Recommended"})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:s})]}),(0,r.jsx)("div",{className:"\n          flex-shrink-0 w-11 h-6 rounded-full transition-colors relative\n          ".concat(n?"bg-primary":"bg-muted","\n        "),children:(0,r.jsx)("div",{className:"\n            absolute top-0.5 w-5 h-5 rounded-full bg-white shadow transition-transform\n            ".concat(n?"translate-x-5":"translate-x-0.5","\n          ")})})]})}function j(e){let{wizard:t}=e,[s,a]=(0,n.useState)("idle"),[i,l]=(0,n.useState)(null),c=async()=>{a("testing"),l(null);try{if(!(await fetch("/api/setup/test-alert",{method:"POST"})).ok)throw Error("Test failed");a("success"),t.updateData({testCompleted:!0})}catch(e){a("failed"),l("Could not trigger test alert. Please try again.")}};return(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Test your setup"}),(0,r.jsx)(d.BT,{children:"Let's make sure everything is working correctly"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center py-6 space-y-4",children:["idle"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto rounded-full bg-primary/10 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Ready to test"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"This will trigger a brief test alert"})]}),(0,r.jsx)(o.$,{onClick:c,size:"lg",children:"Send Test Alert"})]}),"testing"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto rounded-full bg-primary/10 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:"Testing..."}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sending test alert"})]})]}),"success"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto rounded-full bg-green-500/10 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-green-600 dark:text-green-400",children:"Test successful!"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Your Nightwatch is ready to use"})]})]}),"failed"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto rounded-full bg-destructive/10 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-destructive",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-destructive",children:"Test failed"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:i||"Something went wrong"})]}),(0,r.jsx)(o.$,{onClick:c,variant:"outline",children:"Try Again"})]})]}),(0,r.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 space-y-2",children:[(0,r.jsx)("h4",{className:"font-medium text-sm",children:"What to expect:"}),(0,r.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[t.data.notifications.audioAlarm&&(0,r.jsxs)("li",{className:"flex gap-2",children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:"A brief alarm sound will play"})]}),t.data.notifications.pushNotifications&&(0,r.jsxs)("li",{className:"flex gap-2",children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:"A test notification will be sent to your phone"})]}),(0,r.jsxs)("li",{className:"flex gap-2",children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:"The dashboard will show a test alert"})]})]})]})]}),(0,r.jsxs)(d.wL,{className:"flex gap-2",children:[(0,r.jsx)(o.$,{variant:"outline",onClick:t.goBack,className:"flex-1",children:"Back"}),"success"===s?(0,r.jsx)(o.$,{onClick:()=>{t.submitSetup()},className:"flex-1",disabled:t.isSubmitting,children:t.isSubmitting?"Finishing...":"Complete Setup"}):(0,r.jsx)(o.$,{variant:"ghost",onClick:()=>{t.updateData({testCompleted:!1}),t.goNext()},className:"flex-1",children:"Skip for Now"})]})]})}var v=s(8173),N=s.n(v);function b(e){let{wizard:t}=e;return(0,r.jsxs)(d.Zp,{children:[(0,r.jsxs)(d.aR,{className:"text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-green-500/10 flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)(d.ZB,{className:"text-green-600 dark:text-green-400",children:"Setup Complete!"}),(0,r.jsxs)(d.BT,{children:[t.data.monitorName," is now ready to monitor"]})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 space-y-3",children:[(0,r.jsx)("h4",{className:"font-medium text-sm",children:"Configuration summary:"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsx)(y,{label:"Monitor name",value:t.data.monitorName}),(0,r.jsx)(y,{label:"Sensors",value:t.data.sensorsConfirmed?"Configured":"Pending"}),(0,r.jsx)(y,{label:"Audio alarm",value:t.data.notifications.audioAlarm?"Enabled":"Disabled"}),(0,r.jsx)(y,{label:"Push notifications",value:t.data.notifications.pushNotifications?"Enabled":"Disabled"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"font-medium text-sm",children:"Next steps:"}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(w,{icon:(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),title:"Monitor the dashboard",description:"View real-time vitals and alerts"}),(0,r.jsx)(w,{icon:(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),title:"Adjust settings",description:"Fine-tune alert thresholds and notifications"}),t.data.notifications.pushNotifications&&(0,r.jsx)(w,{icon:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),title:"Set up push notifications",description:"Configure Pushover or Ntfy for mobile alerts"})]})]})]}),(0,r.jsx)(d.wL,{children:(0,r.jsx)(o.$,{asChild:!0,className:"w-full",size:"lg",children:(0,r.jsx)(N(),{href:"/",children:"Go to Dashboard"})})})]})}function y(e){let{label:t,value:s}=e;return(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:t}),(0,r.jsx)("span",{className:"font-medium",children:s})]})}function w(e){let{icon:t,title:s,description:n}=e;return(0,r.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-primary",children:t}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-sm",children:s}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n})]})]})}function k(){let e=function(){let[e,t]=(0,n.useState)("welcome"),[s,r]=(0,n.useState)(i),[l,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)(null),u=a.indexOf(e),m=a.length,x=(u+1)/m*100,h=u>0&&"complete"!==e,f=u<a.length-1,p=(0,n.useCallback)(()=>{f&&(t(a[u+1]),c(null))},[f,u]),g=(0,n.useCallback)(()=>{h&&(t(a[u-1]),c(null))},[h,u]),j=(0,n.useCallback)(e=>{t(e),c(null)},[]),v=(0,n.useCallback)(e=>{r(t=>({...t,...e}))},[]),N=(0,n.useCallback)(async()=>{o(!0),c(null);try{let e=await fetch("/api/setup/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok){let t=await e.json();throw Error(t.message||"Setup failed")}p()}catch(e){c(e instanceof Error?e.message:"Setup failed")}finally{o(!1)}},[s,p]);return{currentStep:e,currentIndex:u,totalSteps:m,progress:x,data:s,isSubmitting:l,error:d,canGoBack:h,canGoNext:f,goNext:p,goBack:g,goToStep:j,updateData:v,submitSetup:N,setError:c}}();return(0,r.jsxs)("div",{className:"space-y-6",children:["complete"!==e.currentStep&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.k,{value:e.progress,className:"h-2"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["Step ",e.currentIndex+1," of ",e.totalSteps]})]}),e.error&&(0,r.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 text-destructive px-4 py-3 rounded-lg",role:"alert",children:(0,r.jsx)("p",{className:"text-sm",children:e.error})}),"welcome"===e.currentStep&&(0,r.jsx)(c,{wizard:e}),"name"===e.currentStep&&(0,r.jsx)(x,{wizard:e}),"sensors"===e.currentStep&&(0,r.jsx)(h,{wizard:e}),"notifications"===e.currentStep&&(0,r.jsx)(p,{wizard:e}),"test"===e.currentStep&&(0,r.jsx)(j,{wizard:e}),"complete"===e.currentStep&&(0,r.jsx)(b,{wizard:e})]})}},3312:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var r=s(5155),n=s(2115),a=s(2317),i=s(1027),l=s(1567);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-white hover:bg-success/90",warning:"bg-warning text-black hover:bg-warning/90",danger:"bg-danger text-white hover:bg-danger/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:d=!1,...c}=e,u=d?a.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:s})),ref:t,...c})});d.displayName="Button"},9749:(e,t,s)=>{"use strict";s.d(t,{BT:()=>u,Wu:()=>m,ZB:()=>c,Zp:()=>o,aR:()=>d,wL:()=>x});var r=s(5155),n=s(2115),a=s(1027),i=s(1567);let l=(0,a.F)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",{variants:{variant:{default:"border-border",success:"border-success/50 bg-success/5",warning:"border-warning/50 bg-warning/10 animate-pulse-slow",critical:"border-danger/50 bg-danger/10 animate-pulse-fast shadow-danger/20 shadow-lg"}},defaultVariants:{variant:"default"}}),o=n.forwardRef((e,t)=>{let{className:s,variant:n,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)(l({variant:n}),s),...a})});o.displayName="Card";let d=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...n})});d.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})});c.displayName="CardTitle";let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...n})});u.displayName="CardDescription";let m=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...n})});m.displayName="CardContent";let x=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...n})});x.displayName="CardFooter"},9173:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var r=s(5155),n=s(2115),a=s(2263),i=s(1567);let l=n.forwardRef((e,t)=>{let{className:s,value:n,indicatorClassName:l,...o}=e;return(0,r.jsx)(a.bL,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...o,children:(0,r.jsx)(a.C1,{className:(0,i.cn)("h-full w-full flex-1 bg-primary transition-all",l),style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});l.displayName=a.bL.displayName},1567:(e,t,s)=>{"use strict";s.d(t,{cn:()=>a,fU:()=>i});var r=s(3463),n=s(9795);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.QP)((0,r.$)(t))}function i(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}},8068:(e,t,s)=>{"use strict";s.d(t,{s:()=>i,t:()=>a});var r=s(2115);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let s=!1,r=e.map(e=>{let r=n(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():n(e[t],null)}}}}function i(...e){return r.useCallback(a(...e),e)}},2263:(e,t,s)=>{"use strict";s.d(t,{C1:()=>b,bL:()=>N});var r=s(2115),n=s(5155);s(7650);var a=s(2317),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=(0,a.TL)(`Primitive.${t}`),i=r.forwardRef((e,r)=>{let{asChild:a,...i}=e,l=a?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...i,ref:r})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),l="Progress",[o,d]=function(e,t=[]){let s=[],a=()=>{let t=s.map(e=>r.createContext(e));return function(s){let n=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:n}}),[s,n])}};return a.scopeName=e,[function(t,a){let i=r.createContext(a);i.displayName=t+"Context";let l=s.length;s=[...s,a];let o=t=>{let{scope:s,children:a,...o}=t,d=s?.[e]?.[l]||i,c=r.useMemo(()=>o,Object.values(o));return(0,n.jsx)(d.Provider,{value:c,children:a})};return o.displayName=t+"Provider",[o,function(s,n){let o=n?.[e]?.[l]||i,d=r.useContext(o);if(d)return d;if(void 0!==a)return a;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=s.reduce((t,{useScope:s,scopeName:r})=>{let n=s(e)[`__scope${r}`];return{...t,...n}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return s.scopeName=t.scopeName,s}(a,...t)]}(l),[c,u]=o(l),m=r.forwardRef((e,t)=>{var s,r,a,l;let{__scopeProgress:o,value:d=null,max:u,getValueLabel:m=f,...x}=e;(u||0===u)&&!j(u)&&console.error((s="".concat(u),r="Progress","Invalid prop `max` of value `".concat(s,"` supplied to `").concat(r,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let h=j(u)?u:100;null===d||v(d,h)||console.error((a="".concat(d),l="Progress","Invalid prop `value` of value `".concat(a,"` supplied to `").concat(l,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let N=v(d,h)?d:null,b=g(N)?m(N,h):void 0;return(0,n.jsx)(c,{scope:o,value:N,max:h,children:(0,n.jsx)(i.div,{"aria-valuemax":h,"aria-valuemin":0,"aria-valuenow":g(N)?N:void 0,"aria-valuetext":b,role:"progressbar","data-state":p(N,h),"data-value":null!=N?N:void 0,"data-max":h,...x,ref:t})})});m.displayName=l;var x="ProgressIndicator",h=r.forwardRef((e,t)=>{var s;let{__scopeProgress:r,...a}=e,l=u(x,r);return(0,n.jsx)(i.div,{"data-state":p(l.value,l.max),"data-value":null!==(s=l.value)&&void 0!==s?s:void 0,"data-max":l.max,...a,ref:t})});function f(e,t){return"".concat(Math.round(e/t*100),"%")}function p(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function g(e){return"number"==typeof e}function j(e){return g(e)&&!isNaN(e)&&e>0}function v(e,t){return g(e)&&!isNaN(e)&&e<=t&&e>=0}h.displayName=x;var N=m,b=h},2317:(e,t,s)=>{"use strict";s.d(t,{DX:()=>u,TL:()=>c});var r,n=s(2115),a=s(8068),i=s(5155),l=Symbol.for("react.lazy"),o=(r||(r=s.t(n,2)))[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===l&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function c(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:s,...r}=e;if(d(s)&&"function"==typeof o&&(s=o(s._payload)),n.isValidElement(s)){var i;let e,l;let o=(i=s,(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.props.ref:i.props.ref||i.ref),d=function(e,t){let s={...t};for(let r in t){let n=e[r],a=t[r];/^on[A-Z]/.test(r)?n&&a?s[r]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(s[r]=n):"style"===r?s[r]={...n,...a}:"className"===r&&(s[r]=[n,a].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==n.Fragment&&(d.ref=t?(0,a.t)(t,o):o),n.cloneElement(s,d)}return n.Children.count(s)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=n.forwardRef((e,s)=>{let{children:r,...a}=e;d(r)&&"function"==typeof o&&(r=o(r._payload));let l=n.Children.toArray(r),c=l.find(x);if(c){let e=c.props.children,r=l.map(t=>t!==c?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...a,ref:s,children:n.isValidElement(e)?n.cloneElement(e,void 0,r):null})}return(0,i.jsx)(t,{...a,ref:s,children:r})});return s.displayName=`${e}.Slot`,s}var u=c("Slot"),m=Symbol("radix.slottable");function x(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}},1027:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});var r=s(3463);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=r.$,i=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return a(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:i,defaultVariants:l}=t,o=Object.keys(i).map(e=>{let t=null==s?void 0:s[e],r=null==l?void 0:l[e];if(null===t)return null;let a=n(t)||n(r);return i[e][a]}),d=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return a(e,o,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...n}=t;return Object.entries(n).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...l,...d}[t]):({...l,...d})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}},e=>{var t=t=>e(e.s=t);e.O(0,[181,173,441,517,358],()=>t(9854)),_N_E=e.O()}]);