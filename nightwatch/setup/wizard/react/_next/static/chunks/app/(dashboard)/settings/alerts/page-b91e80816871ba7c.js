(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{4320:(e,s,r)=>{Promise.resolve().then(r.bind(r,6870))},1180:(e,s,r)=>{"use strict";r.d(s,{FH:()=>t});var a=r(5350);let t=a.dp;(0,a.Op)()},6870:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var a=r(5155),t=r(2115),l=r(4159),n=r(1180),d=r(9749),i=r(4057);let o=(0,i.A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),c=(0,i.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var m=r(5524),u=r(1068);function x(){let e=(0,l.IT)(n.FH.alertRules.list),s=(0,l.n_)(n.FH.alertRules.seedDefaults),r=(0,l.n_)(n.FH.alertRules.upsert),i=(0,l.n_)(n.FH.alertRules.toggle),x=(0,l.n_)(n.FH.alertRules.remove),[p,h]=(0,t.useState)(null),[g,f]=(0,t.useState)(null);(0,t.useEffect)(()=>{void 0!==e&&0===e.length&&s({})},[e,s]);let b=async e=>{await i({name:e})},j=e=>{f({...e}),h(e.name)},v=async()=>{g&&(await r(g),f(null))},N=async e=>{confirm('Delete rule "'.concat(e,'"?'))&&await x({name:e})},y={critical:"bg-danger/20 text-danger border-danger/50",warning:"bg-warning/20 text-warning border-warning/50"};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Alert Rules"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure when alerts are triggered based on vital signs"})]}),(0,a.jsx)("div",{className:"space-y-3",children:null==e?void 0:e.map(e=>{let s=p===e.name,r=(null==g?void 0:g.name)===e.name;return(0,a.jsx)(d.Zp,{children:(0,a.jsxs)(d.Wu,{className:"p-0",children:[(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between cursor-pointer",onClick:()=>h(s?null:e.name),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),b(e.name)},className:"relative w-10 h-5 rounded-full transition-colors ".concat(e.enabled?"bg-primary":"bg-muted"),children:(0,a.jsx)("span",{className:"absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-transform ".concat(e.enabled?"translate-x-5":"")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.detector," \xb7 ",e.field.split(".").pop()," ",e.operator," ",e.value]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium border ".concat(y[e.severity]||"bg-muted"),children:e.severity}),s?(0,a.jsx)(o,{className:"h-4 w-4 text-muted-foreground"}):(0,a.jsx)(c,{className:"h-4 w-4 text-muted-foreground"})]})]}),s&&(0,a.jsx)("div",{className:"border-t p-4 space-y-4",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Threshold Value"}),(0,a.jsx)("input",{type:"number",value:g.value,onChange:e=>f(s=>s?{...s,value:Number(e.target.value)}:null),className:"w-full px-3 py-2 rounded-md border bg-background text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Duration (seconds)"}),(0,a.jsx)("input",{type:"number",value:g.durationSeconds,onChange:e=>f(s=>s?{...s,durationSeconds:Number(e.target.value)}:null),className:"w-full px-3 py-2 rounded-md border bg-background text-sm"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Severity"}),(0,a.jsxs)("select",{value:g.severity,onChange:e=>f(s=>s?{...s,severity:e.target.value}:null),className:"w-full px-3 py-2 rounded-md border bg-background text-sm",children:[(0,a.jsx)("option",{value:"warning",children:"Warning"}),(0,a.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Cooldown (seconds)"}),(0,a.jsx)("input",{type:"number",value:g.cooldownSeconds,onChange:e=>f(s=>s?{...s,cooldownSeconds:Number(e.target.value)}:null),className:"w-full px-3 py-2 rounded-md border bg-background text-sm"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Message"}),(0,a.jsx)("input",{type:"text",value:g.message,onChange:e=>f(s=>s?{...s,message:e.target.value}:null),className:"w-full px-3 py-2 rounded-md border bg-background text-sm"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>f(null),className:"flex-1 px-3 py-2 rounded-md border hover:bg-muted transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:v,className:"flex-1 px-3 py-2 rounded-md bg-primary text-primary-foreground font-medium hover:bg-primary/90 transition-colors",children:"Save"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Threshold"}),(0,a.jsxs)("p",{className:"font-medium",children:[e.field.split(".").pop()," ",e.operator," ",e.value]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Duration"}),(0,a.jsxs)("p",{className:"font-medium",children:[e.durationSeconds,"s"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Cooldown"}),(0,a.jsxs)("p",{className:"font-medium",children:[e.cooldownSeconds,"s"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Detector"}),(0,a.jsx)("p",{className:"font-medium capitalize",children:e.detector})]})]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Message"}),(0,a.jsx)("p",{className:"font-medium",children:e.message})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>j(e),className:"flex-1 px-3 py-2 rounded-md border hover:bg-muted transition-colors",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>N(e.name),className:"px-3 py-2 rounded-md border border-danger/50 text-danger hover:bg-danger/10 transition-colors",children:(0,a.jsx)(m.A,{className:"h-4 w-4"})})]})]})})]})},e.name)})}),(null==e?void 0:e.length)===0&&(0,a.jsx)(d.Zp,{children:(0,a.jsxs)(d.Wu,{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-full bg-muted inline-block mb-3",children:(0,a.jsx)(u.A,{className:"h-6 w-6 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"font-medium mb-1",children:"No alert rules"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Default rules will be created automatically"}),(0,a.jsx)("button",{onClick:()=>s({}),className:"px-4 py-2 rounded-md bg-primary text-primary-foreground font-medium hover:bg-primary/90 transition-colors",children:"Create Default Rules"})]})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"Changes to alert rules will be synced to the backend on next restart"})]})}},9749:(e,s,r)=>{"use strict";r.d(s,{BT:()=>m,Wu:()=>u,ZB:()=>c,Zp:()=>i,aR:()=>o,wL:()=>x});var a=r(5155),t=r(2115),l=r(1027),n=r(1567);let d=(0,l.F)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",{variants:{variant:{default:"border-border",success:"border-success/50 bg-success/5",warning:"border-warning/50 bg-warning/10 animate-pulse-slow",critical:"border-danger/50 bg-danger/10 animate-pulse-fast shadow-danger/20 shadow-lg"}},defaultVariants:{variant:"default"}}),i=t.forwardRef((e,s)=>{let{className:r,variant:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)(d({variant:t}),r),...l})});i.displayName="Card";let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...t})});o.displayName="CardHeader";let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...t})});c.displayName="CardTitle";let m=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",r),...t})});m.displayName="CardDescription";let u=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",r),...t})});u.displayName="CardContent";let x=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",r),...t})});x.displayName="CardFooter"},1567:(e,s,r)=>{"use strict";r.d(s,{cn:()=>l,fU:()=>n});var a=r(3463),t=r(9795);function l(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.QP)((0,a.$)(s))}function n(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}},5524:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(4057).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1068:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(4057).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[181,540,520,441,517,358],()=>s(4320)),_N_E=e.O()}]);