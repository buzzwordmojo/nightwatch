(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[765],{2391:(e,s,r)=>{Promise.resolve().then(r.bind(r,1419))},1180:(e,s,r)=>{"use strict";r.d(s,{FH:()=>a});var t=r(5350);let a=t.dp;(0,t.Op)()},1419:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(5155),a=r(2115),n=r(4159),i=r(1180),l=r(9749),o=r(7746);let d=(0,r(4057).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),c={enabled:!1,provider:"pushover",pushoverUserKey:"",pushoverApiToken:"",ntfyServer:"https://ntfy.sh",ntfyTopic:"",alertLevels:["critical","warning"]};function u(){let e=(0,n.IT)(i.FH.settings.getAll),s=(0,n.n_)(i.FH.settings.set),[r,u]=(0,a.useState)(c),[m,p]=(0,a.useState)(!1),[f,h]=(0,a.useState)(!1),[v,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(e){var s,r,t,a,n,i,l;u({enabled:null!==(s=e["notifications.enabled"])&&void 0!==s&&s,provider:null!==(r=e["notifications.provider"])&&void 0!==r?r:"pushover",pushoverUserKey:null!==(t=e["notifications.pushoverUserKey"])&&void 0!==t?t:"",pushoverApiToken:null!==(a=e["notifications.pushoverApiToken"])&&void 0!==a?a:"",ntfyServer:null!==(n=e["notifications.ntfyServer"])&&void 0!==n?n:"https://ntfy.sh",ntfyTopic:null!==(i=e["notifications.ntfyTopic"])&&void 0!==i?i:"",alertLevels:null!==(l=e["notifications.alertLevels"])&&void 0!==l?l:["critical","warning"]})}},[e]);let g=async()=>{p(!0);try{await Promise.all([s({key:"notifications.enabled",value:r.enabled}),s({key:"notifications.provider",value:r.provider}),s({key:"notifications.pushoverUserKey",value:r.pushoverUserKey}),s({key:"notifications.pushoverApiToken",value:r.pushoverApiToken}),s({key:"notifications.ntfyServer",value:r.ntfyServer}),s({key:"notifications.ntfyTopic",value:r.ntfyTopic}),s({key:"notifications.alertLevels",value:r.alertLevels})])}finally{p(!1)}},b=async()=>{h(!0),x(null);try{if("pushover"===r.provider){if(!r.pushoverUserKey||!r.pushoverApiToken){x({success:!1,message:"Please enter Pushover credentials"});return}x({success:!0,message:"Test notification sent to Pushover"})}else{if(!r.ntfyTopic){x({success:!1,message:"Please enter an Ntfy topic"});return}x({success:!0,message:"Test notification sent to Ntfy"})}}catch(e){x({success:!1,message:"Failed to send test notification"})}finally{h(!1)}},y=e=>{u(s=>({...s,alertLevels:s.alertLevels.includes(e)?s.alertLevels.filter(s=>s!==e):[...s.alertLevels,e]}))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Push Notifications"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get alerts on your phone when issues are detected"})]}),(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-full bg-muted",children:(0,t.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Push Notifications"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Send alerts to your phone"})]})]}),(0,t.jsx)("button",{onClick:()=>u(e=>({...e,enabled:!e.enabled})),className:"relative w-12 h-6 rounded-full transition-colors ".concat(r.enabled?"bg-primary":"bg-muted"),children:(0,t.jsx)("span",{className:"absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform ".concat(r.enabled?"translate-x-6":"")})})]})})}),r.enabled&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Zp,{children:(0,t.jsxs)(l.Wu,{className:"p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"font-medium",children:"Provider"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{onClick:()=>u(e=>({...e,provider:"pushover"})),className:"p-4 rounded-lg border text-left transition-colors ".concat("pushover"===r.provider?"border-primary bg-primary/5":"border-muted hover:border-muted-foreground/50"),children:[(0,t.jsx)("p",{className:"font-medium",children:"Pushover"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Reliable push notifications"})]}),(0,t.jsxs)("button",{onClick:()=>u(e=>({...e,provider:"ntfy"})),className:"p-4 rounded-lg border text-left transition-colors ".concat("ntfy"===r.provider?"border-primary bg-primary/5":"border-muted hover:border-muted-foreground/50"),children:[(0,t.jsx)("p",{className:"font-medium",children:"Ntfy"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Free, self-hostable"})]})]})]})}),(0,t.jsx)(l.Zp,{children:(0,t.jsxs)(l.Wu,{className:"p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"font-medium",children:"pushover"===r.provider?"Pushover Settings":"Ntfy Settings"}),"pushover"===r.provider?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1.5",children:"User Key"}),(0,t.jsx)("input",{type:"text",value:r.pushoverUserKey,onChange:e=>u(s=>({...s,pushoverUserKey:e.target.value})),placeholder:"Enter your Pushover user key",className:"w-full px-3 py-2 rounded-md border bg-background text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1.5",children:"API Token"}),(0,t.jsx)("input",{type:"password",value:r.pushoverApiToken,onChange:e=>u(s=>({...s,pushoverApiToken:e.target.value})),placeholder:"Enter your Pushover API token",className:"w-full px-3 py-2 rounded-md border bg-background text-sm"})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1.5",children:"Server"}),(0,t.jsx)("input",{type:"url",value:r.ntfyServer,onChange:e=>u(s=>({...s,ntfyServer:e.target.value})),placeholder:"https://ntfy.sh",className:"w-full px-3 py-2 rounded-md border bg-background text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1.5",children:"Topic"}),(0,t.jsx)("input",{type:"text",value:r.ntfyTopic,onChange:e=>u(s=>({...s,ntfyTopic:e.target.value})),placeholder:"nightwatch-alerts",className:"w-full px-3 py-2 rounded-md border bg-background text-sm"})]})]})]})}),(0,t.jsx)(l.Zp,{children:(0,t.jsxs)(l.Wu,{className:"p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"font-medium",children:"Alert Levels"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose which alert levels trigger push notifications"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>y("critical"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(r.alertLevels.includes("critical")?"bg-danger/20 text-danger border border-danger/50":"bg-muted text-muted-foreground"),children:"Critical"}),(0,t.jsx)("button",{onClick:()=>y("warning"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(r.alertLevels.includes("warning")?"bg-warning/20 text-warning border border-warning/50":"bg-muted text-muted-foreground"),children:"Warning"})]})]})}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:b,disabled:f,className:"flex items-center gap-2 px-4 py-2 rounded-md border hover:bg-muted transition-colors disabled:opacity-50",children:[(0,t.jsx)(d,{className:"h-4 w-4"}),f?"Sending...":"Test"]}),(0,t.jsx)("button",{onClick:g,disabled:m,className:"flex-1 px-4 py-2 rounded-md bg-primary text-primary-foreground font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",children:m?"Saving...":"Save Changes"})]}),v&&(0,t.jsx)("div",{className:"p-3 rounded-md text-sm ".concat(v.success?"bg-success/20 text-success":"bg-danger/20 text-danger"),children:v.message})]})]})}},9749:(e,s,r)=>{"use strict";r.d(s,{BT:()=>u,Wu:()=>m,ZB:()=>c,Zp:()=>o,aR:()=>d,wL:()=>p});var t=r(5155),a=r(2115),n=r(1027),i=r(1567);let l=(0,n.F)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-300",{variants:{variant:{default:"border-border",success:"border-success/50 bg-success/5",warning:"border-warning/50 bg-warning/10 animate-pulse-slow",critical:"border-danger/50 bg-danger/10 animate-pulse-fast shadow-danger/20 shadow-lg"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,s)=>{let{className:r,variant:a,...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)(l({variant:a}),r),...n})});o.displayName="Card";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});d.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let u=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});u.displayName="CardDescription";let m=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",r),...a})});m.displayName="CardContent";let p=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})});p.displayName="CardFooter"},1567:(e,s,r)=>{"use strict";r.d(s,{cn:()=>n,fU:()=>i});var t=r(3463),a=r(9795);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,a.QP)((0,t.$)(s))}function i(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}},7746:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(4057).A)("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[181,540,520,441,517,358],()=>s(2391)),_N_E=e.O()}]);